<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>randoms</title>
    <script src="include/three/three.js"></script>
    <script src="include/three/OrbitControls.js"></script>
    <script src="include/three/GLTFLoader.js"></script>
    <!-- Functions include -->
    <script src="js/classes.js"></script>
    <script src="js/maps.js"></script>
    <script src="js/traps.js"></script>
    <script src="js/logic.js"></script>
    <script src="js/camera.js"></script>
    <script src="js/mesh.js"></script>
    <script src="js/model.js"></script>
    <script src="js/mapConstruction.js"></script>
    <script src="js/event.js"></script>

    <!-- tmp levels include -->
    <script src="tmp-tests/louisD.js"></script>
    <script src="tmp-tests/louisM.js"></script>
    <script src="tmp-tests/marie.js"></script>
    <script src="tmp-tests/noe.js"></script>
    <style>
        #scene-container {
            position: absolute;
            width: 100%;
            height: 100%;
        }
    </style>
</head>

<body style="padding:0;margin:0;">
    <div id="scene-container" style="width:99%;height:99%;">
        <!-- This div will hold our scene-->
        <script>
            let container;
            let camera;
            let controls;
            let renderer;
            let scene;
            let heroMesh;
            const mixers = [];
            const clock = new THREE.Clock();

            function init() {

                container = document.querySelector('#scene-container');

                scene = new THREE.Scene();
                scene.background = new THREE.Color(0x8FBCD4);

                currentLevel = testLevel;
                // currentLevel = personLevel;
                currentMap = 0; // Top right of the level

                createCamera();
                createControls();
                createLights();
                createSkybox();
                createMap(currentLevel.maps[currentMap]);
                loadModels();
                createRenderer();

                renderer.setAnimationLoop(() => {
                    update();
                    render();

                });

            }

            function createRenderer() {

                renderer = new THREE.WebGLRenderer({
                    antialias: true
                });
                renderer.setSize(container.clientWidth, container.clientHeight);

                renderer.setPixelRatio(window.devicePixelRatio);

                renderer.gammaFactor = 2.2;
                renderer.gammaOutput = true;

                renderer.physicallyCorrectLights = true;

                container.appendChild(renderer.domElement);

            }

            // perform any updates to the scene, called once per frame
            // avoid heavy computation here
            function update() {

                const delta = clock.getDelta();

                for (const mixer of mixers) {

                    mixer.update(delta);

                }

            }

            // render, or 'draw a still image', of the scene
            function render() {

                renderer.render(scene, camera);

            }



            init();
        </script>
    </div>
</body>

</html>